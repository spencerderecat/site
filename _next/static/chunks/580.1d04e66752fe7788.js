(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[580],{4580:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>C});var r=n(5155),l=n(2115);let o=(0,l.createContext)(null);function u(){let e=(0,l.use)(o);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var a=n(7650);function i(e,t){let n=(0,l.useRef)(t);(0,l.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function c(e,t){let n=(0,l.useRef)(void 0);(0,l.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function s(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function f(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function d(e,t){return null==t?function(t,n){let r=(0,l.useRef)(void 0);return r.current||(r.current=e(t,n)),r}:function(n,r){let o=(0,l.useRef)(void 0);o.current||(o.current=e(n,r));let u=(0,l.useRef)(n),{instance:a}=o.current;return(0,l.useEffect)(function(){u.current!==n&&(t(a,n,u.current),u.current=n)},[a,n,t]),o}}function p(e){return function(t){var n;let r=u(),o=e(s(t,r),r);return i(r.map,t.attribution),c(o.current,t.eventHandlers),n=o.current,(0,l.useEffect)(function(){return(r.layerContainer??r.map).addLayer(n.instance),function(){r.layerContainer?.removeLayer(n.instance),r.map.removeLayer(n.instance)}},[r,n]),o}}var g=n(5752),m=n.n(g);let b=function(e,t){var n;return n=p(d(e,t)),(0,l.forwardRef)(function(e,t){let{instance:r,context:u}=n(e).current;(0,l.useImperativeHandle)(t,()=>r);let{children:a}=e;return null==a?null:l.createElement(o,{value:u},a)})}(function({position:e,...t},n){var r;let l=new g.Marker(e,t);return f(l,(r={overlayContainer:l},Object.freeze({...n,...r})))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),v=function(e,t){var n,r;return n=d(e),r=function(e,r){let l=u(),o=n(s(e,l),l);return i(l.map,e.attribution),c(o.current,e.eventHandlers),t(o.current,l,e,r),o},(0,l.forwardRef)(function(e,t){let[n,o]=(0,l.useState)(!1),{instance:u}=r(e,o).current;(0,l.useImperativeHandle)(t,()=>u),(0,l.useEffect)(function(){n&&u.update()},[u,n,e.children]);let i=u._contentNode;return i?(0,a.createPortal)(e.children,i):null})}(function(e,t){return f(new g.Popup(e,t.overlayContainer),t)},function(e,t,{position:n},r){(0,l.useEffect)(function(){let{instance:l}=e;function o(e){e.popup===l&&(l.update(),r(!0))}function u(e){e.popup===l&&r(!1)}return t.map.on({popupopen:o,popupclose:u}),null==t.overlayContainer?(null!=n&&l.setLatLng(n),l.openOn(t.map)):t.overlayContainer.bindPopup(l),function(){t.map.off({popupopen:o,popupclose:u}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(l)}},[e,t,r,n])}),h=(0,l.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:u,id:a,placeholder:i,style:c,whenReady:s,zoom:f,...d},p){let[m]=(0,l.useState)({className:u,id:a,style:c}),[b,v]=(0,l.useState)(null),h=(0,l.useRef)(void 0);(0,l.useImperativeHandle)(p,()=>b?.map??null,[b]);let x=(0,l.useCallback)(r=>{if(null!==r&&!h.current){let l=new g.Map(r,d);h.current=l,null!=n&&null!=f?l.setView(n,f):null!=e&&l.fitBounds(e,t),null!=s&&l.whenReady(s),v(Object.freeze({__version:1,map:l}))}},[]);(0,l.useEffect)(()=>()=>{b?.map.remove()},[b]);let y=b?l.createElement(o,{value:b},r):i??null;return l.createElement("div",{...m,ref:x},y)}),x=function(e,t){var n;return n=p(d(e,t)),(0,l.forwardRef)(function(e,t){let{instance:r}=n(e).current;return(0,l.useImperativeHandle)(t,()=>r),null})}(function({url:e,...t},n){return f(new g.TileLayer(e,s(t,n)),n)},function(e,t,n){let{opacity:r,zIndex:l}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=l&&l!==n.zIndex&&e.setZIndex(l);let{url:o}=t;null!=o&&o!==n.url&&e.setUrl(o)});n(8413);let y="surf-map-pins",w=new(m()).DivIcon({html:'<div style="display: flex; align-items: center; justify-content: center;">'.concat('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" width="36" height="36" style="display:block;"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3" /></svg>',"</div>"),className:"custom-svg-pin",iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-36]});function j(e){let{pins:t,deletePin:n,openAddModal:o}=e;return!function(e){let t=u().map;(0,l.useEffect)(function(){return t.on(e),function(){t.off(e)}},[t,e])}({click(e){o(e.latlng.lat,e.latlng.lng)}}),(0,r.jsx)(r.Fragment,{children:t.map((e,t)=>(0,r.jsx)(b,{position:[e.lat,e.lng],icon:w,children:(0,r.jsxs)(v,{children:[(0,r.jsx)("div",{children:e.note}),(0,r.jsx)("button",{className:"mt-2 px-2 py-1 bg-red-500 text-white rounded hover:bg-red-700",onClick:()=>n(t),children:"Delete Pin"})]})},t))})}function C(e){let{onPinCountChange:t}=e,[n,o]=(0,l.useState)([]),[u,a]=(0,l.useState)(!1),[i,c]=(0,l.useState)(!1),[s,f]=(0,l.useState)(null),[d,p]=(0,l.useState)("");(0,l.useEffect)(()=>{{let e=localStorage.getItem(y);if(e)try{let t=JSON.parse(e);Array.isArray(t)&&(o(t),console.log("Loaded pins from localStorage:",t))}catch(e){console.warn("Failed to parse pins from localStorage")}a(!0)}},[]),(0,l.useEffect)(()=>{u&&(localStorage.setItem(y,JSON.stringify(n)),t&&t(n.length),console.log("Saved pins to localStorage:",n))},[n,u,t]);let g=(0,l.useCallback)(e=>{o(t=>t.filter((t,n)=>n!==e))},[]),m=()=>{c(!1),f(null),p("")};return(0,r.jsxs)("div",{className:"relative w-full h-full",children:[(0,r.jsxs)(h,{center:[20,0],zoom:2,style:{width:"100%",height:"100%"},scrollWheelZoom:!0,children:[(0,r.jsx)(x,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,r.jsx)(j,{pins:n,deletePin:g,openAddModal:(e,t)=>{f({lat:e,lng:t}),p(""),c(!0)}})]}),i&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[1000] bg-black/40",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-8 w-full max-w-md flex flex-col items-center",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-black",children:"Add a Surf Spot Note"}),(0,r.jsx)("textarea",{className:"w-full h-24 p-2 border border-gray-300 rounded mb-4 text-black",placeholder:"Describe this surf spot...",value:d,onChange:e=>p(e.target.value),autoFocus:!0}),(0,r.jsxs)("div",{className:"flex gap-4 w-full justify-end",children:[(0,r.jsx)("button",{className:"px-4 py-2 rounded bg-gray-200 text-black hover:bg-gray-300",onClick:m,children:"Cancel"}),(0,r.jsx)("button",{className:"px-4 py-2 rounded bg-blue-600 text-white font-bold hover:bg-blue-700 disabled:bg-blue-200",onClick:()=>{s&&d.trim()&&(o(e=>[...e,{lat:s.lat,lng:s.lng,note:d.trim()}]),m())},disabled:!d.trim(),children:"Add"})]})]})})]})}},8413:()=>{}}]);